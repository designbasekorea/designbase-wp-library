<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DEWP – Lightbox</title>
  <link rel="stylesheet" href="https://unpkg.com/@designbasekorea/theme@latest/dist/css/theme.css" />
  <link rel="stylesheet" href="https://unpkg.com/@designbasekorea/icons-webfont@latest/dist/webfont/icons.css" />
  <link rel="stylesheet" href="https://unpkg.com/designbase-wp-library@latest/dist/css/dewp.min.css" />
  <link rel="stylesheet" href="./src/_examples-shell.css" />
</head>

<body>

  <div class="ex-section">
    <div class="ex-section-header">
      <div class="ex-section-title-area">
        <h3 class="ex-section-title">이미지 갤러리 라이트박스</h3>
        <p class="ex-section-description">썸네일 클릭 시 전체 화면 확대 &amp; 스와이프</p>
      </div>
    </div>
    <div class="ex-section-content">
      <div class="dewp-lightbox-gallery" id="docsLightboxGallery">
        <button type="button" data-dewp-lightbox="travel"
          data-lightbox-src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1600&q=80"
          data-lightbox-caption="Sunset Walk">
          <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=360&q=60"
            alt="Sunset Walk" />
        </button>
        <button type="button" data-dewp-lightbox="travel"
          data-lightbox-src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=1600&q=80"
          data-lightbox-caption="Mountains &amp; Lakes">
          <img src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=360&q=60"
            alt="Mountains & Lakes" />
        </button>
        <button type="button" data-dewp-lightbox="travel"
          data-lightbox-src="https://images.unsplash.com/photo-1500534623283-312aade485b7?auto=format&fit=crop&w=1600&q=80"
          data-lightbox-caption="City Lights">
          <img src="https://images.unsplash.com/photo-1500534623283-312aade485b7?auto=format&fit=crop&w=360&q=60"
            alt="City Lights" />
        </button>
        <button type="button" data-dewp-lightbox="travel"
          data-lightbox-src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1600&q=80&sat=60"
          data-lightbox-caption="Ocean Breeze">
          <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=360&q=60&sat=60"
            alt="Ocean Breeze" />
        </button>
      </div>
    </div>
  </div>

  <div class="ex-section">
    <div class="ex-section-header">
      <div class="ex-section-title-area">
        <h3 class="ex-section-title">라이트박스 컨트롤</h3>
        <p class="ex-section-description">자바스크립트로 직접 열기/닫기</p>
      </div>
    </div>
    <div class="ex-section-content">
      <div style="display: flex; flex-wrap: wrap; gap: var(--db-gap-m);">
        <button class="dewp-btn dewp-btn-primary" id="openLightboxFirst">첫 번째 이미지 열기</button>
        <button class="dewp-btn" id="openLightboxLast">마지막 이미지 열기</button>
        <button class="dewp-btn dewp-btn-tertiary" id="closeLightboxBtn">라이트박스 닫기</button>
      </div>
      <p style="margin-top: var(--db-gap-m); color: var(--db-text-secondary);">
        <code>DEWP.openLightbox()</code>와 <code>DEWP.closeLightbox()</code>로 어디서든 제어할 수 있습니다.
      </p>
    </div>
  </div>

  <div class="ex-section">
    <div class="ex-section-header">
      <div class="ex-section-title-area">
        <h3 class="ex-section-title">문서 요약</h3>
        <p class="ex-section-description">Lightbox 핵심 사용 가이드</p>
      </div>
    </div>
    <div class="ex-section-content ex-docs">
      <section>
        <h4>1. HTML 구조 - 트리거 요소</h4>
        <p>Lightbox를 열기 위한 트리거 요소를 만듭니다. 버튼, 링크, 이미지 등 어떤 요소든 사용할 수 있습니다:</p>
        <pre>
<code class="language-html">&lt;!-- 방법 1: 버튼 사용 (권장) --&gt;
&lt;button type="button"
        data-dewp-lightbox="gallery-a"
        data-lightbox-src="large-image.jpg"
        data-lightbox-caption="이미지 설명 텍스트"&gt;
  &lt;img src="thumbnail.jpg" alt="썸네일"&gt;
&lt;/button&gt;

&lt;!-- 방법 2: 링크 사용 --&gt;
&lt;a href="large-image.jpg"
   data-dewp-lightbox="gallery-a"
   data-lightbox-caption="이미지 설명"&gt;
  &lt;img src="thumbnail.jpg" alt="썸네일"&gt;
&lt;/a&gt;

&lt;!-- 방법 3: 이미지 직접 사용 --&gt;
&lt;img src="thumbnail.jpg"
     data-dewp-lightbox="gallery-a"
     data-lightbox-src="large-image.jpg"
     data-lightbox-caption="이미지 설명"
     alt="썸네일"&gt;</code>
        </pre>
        <p><strong>필수 속성:</strong></p>
        <ul>
          <li><code>data-dewp-lightbox</code>: 그룹 이름 (같은 그룹명을 가진 요소들은 하나의 갤러리로 묶임)</li>
          <li><code>data-lightbox-src</code> 또는 <code>href</code> 또는 <code>src</code>: 라이트박스에 표시할 이미지 URL</li>
        </ul>
        <p><strong>선택 속성:</strong></p>
        <ul>
          <li><code>data-lightbox-caption</code> 또는 <code>title</code> 또는 <code>data-caption</code>: 이미지 설명 텍스트</li>
        </ul>
        <p><strong>이미지 경로 우선순위:</strong> <code>data-lightbox-src</code> → <code>href</code> → <code>src</code> 순서로 확인합니다.</p>
      </section>

      <section>
        <h4>2. 그룹화 - 여러 이미지를 하나의 갤러리로</h4>
        <p>같은 <code>data-dewp-lightbox</code> 값을 가진 요소들은 하나의 갤러리로 묶여, 라이트박스에서 좌우로 이동할 수 있습니다:</p>
        <pre>
<code class="language-html">&lt;div class="gallery"&gt;
  &lt;button type="button" data-dewp-lightbox="vacation" data-lightbox-src="img1.jpg" data-lightbox-caption="첫 번째"&gt;
    &lt;img src="thumb1.jpg"&gt;
  &lt;/button&gt;
  &lt;button type="button" data-dewp-lightbox="vacation" data-lightbox-src="img2.jpg" data-lightbox-caption="두 번째"&gt;
    &lt;img src="thumb2.jpg"&gt;
  &lt;/button&gt;
  &lt;button type="button" data-dewp-lightbox="vacation" data-lightbox-src="img3.jpg" data-lightbox-caption="세 번째"&gt;
    &lt;img src="thumb3.jpg"&gt;
  &lt;/button&gt;
&lt;/div&gt;</code>
        </pre>
        <p>위 예시에서 세 개의 버튼은 모두 <code>vacation</code> 그룹에 속하므로, 어떤 버튼을 클릭해도 라이트박스가 열리고 좌우 화살표로 다른 이미지들을 탐색할 수 있습니다.</p>
      </section>

      <section>
        <h4>3. 초기화 - 자동 vs 수동</h4>
        <h5>방법 1: 자동 초기화 (권장)</h5>
        <pre>
<code class="language-html">&lt;!-- HTML에 data-dewp-lightbox 속성이 있으면 --&gt;
&lt;button data-dewp-lightbox="gallery" data-lightbox-src="img.jpg"&gt;...&lt;/button&gt;

&lt;script&gt;
// 페이지 로드 시 자동으로 모든 트리거 등록
DEWP.autoInitializeLightbox();
&lt;/script&gt;</code>
        </pre>

        <h5>방법 2: 수동 등록</h5>
        <pre>
<code class="language-js">// 특정 컨테이너 내의 모든 트리거 등록
const gallery = document.getElementById('myGallery');
DEWP.registerLightbox(gallery, {
  loop: true,
  showCaption: true
});

// 또는 CSS 셀렉터 사용
DEWP.registerLightbox('#myGallery', {
  loop: true
});

// 개별 요소 등록
const trigger = document.querySelector('[data-dewp-lightbox="single"]');
DEWP.registerLightbox(trigger);</code>
        </pre>
        <p><strong>중요:</strong> 같은 트리거를 여러 번 등록해도 한 번만 이벤트가 바인딩됩니다.</p>
      </section>

      <section>
        <h4>4. JavaScript API - 전체 메서드 목록</h4>
        <h5>등록 및 초기화</h5>
        <pre>
<code class="language-js">// 트리거 요소 등록 (컨테이너 또는 개별 요소)
DEWP.registerLightbox(element, options);

// 페이지의 모든 [data-dewp-lightbox] 요소 자동 등록
DEWP.autoInitializeLightbox();</code>
        </pre>

        <h5>라이트박스 제어</h5>
        <pre>
<code class="language-js">// 라이트박스 열기 (그룹명, 인덱스)
DEWP.openLightbox('gallery-a', 0);  // 'gallery-a' 그룹의 첫 번째 이미지
DEWP.openLightbox('gallery-a', 2);  // 'gallery-a' 그룹의 세 번째 이미지

// 라이트박스 닫기
DEWP.closeLightbox();

// 다음 이미지로 이동
DEWP.nextLightbox();

// 이전 이미지로 이동
DEWP.prevLightbox();</code>
        </pre>
        <p><strong>주의:</strong> <code>openLightbox</code>는 등록된 그룹명을 사용해야 합니다. 존재하지 않는 그룹명을 사용하면 아무 동작도 하지 않습니다.</p>
      </section>

      <section>
        <h4>5. 옵션 설정</h4>
        <h5>JavaScript 옵션 객체로 설정</h5>
        <pre>
<code class="language-js">DEWP.registerLightbox(element, {
  loop: true,                    // 무한 루프 (기본값: true)
  swipe: true,                   // 터치/마우스 드래그 스와이프 (기본값: true)
  keyboard: true,                // 키보드 지원 (기본값: true)
  closeOnBackdrop: true,         // 배경 클릭 시 닫기 (기본값: true)
  showCaption: true              // 캡션 표시 (기본값: true)
});</code>
        </pre>

        <h5>옵션 상세 설명</h5>
        <table style="width: 100%; border-collapse: collapse; margin-top: var(--db-gap-m);">
          <thead>
            <tr style="border-bottom: 1px solid var(--db-border);">
              <th style="padding: var(--db-padding-s); text-align: left;">옵션</th>
              <th style="padding: var(--db-padding-s); text-align: left;">타입</th>
              <th style="padding: var(--db-padding-s); text-align: left;">기본값</th>
              <th style="padding: var(--db-padding-s); text-align: left;">설명</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--db-border-light);">
              <td style="padding: var(--db-padding-s);"><code>loop</code></td>
              <td style="padding: var(--db-padding-s);">boolean</td>
              <td style="padding: var(--db-padding-s);">true</td>
              <td style="padding: var(--db-padding-s);">마지막 이미지에서 다음 버튼 클릭 시 첫 번째로, 첫 번째에서 이전 버튼 클릭 시 마지막으로 이동</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--db-border-light);">
              <td style="padding: var(--db-padding-s);"><code>swipe</code></td>
              <td style="padding: var(--db-padding-s);">boolean</td>
              <td style="padding: var(--db-padding-s);">true</td>
              <td style="padding: var(--db-padding-s);">터치/마우스 드래그로 이미지 이동 (15% 이상 드래그 시)</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--db-border-light);">
              <td style="padding: var(--db-padding-s);"><code>keyboard</code></td>
              <td style="padding: var(--db-padding-s);">boolean</td>
              <td style="padding: var(--db-padding-s);">true</td>
              <td style="padding: var(--db-padding-s);">ESC 키로 닫기, ← → 화살표 키로 이미지 탐색</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--db-border-light);">
              <td style="padding: var(--db-padding-s);"><code>closeOnBackdrop</code></td>
              <td style="padding: var(--db-padding-s);">boolean</td>
              <td style="padding: var(--db-padding-s);">true</td>
              <td style="padding: var(--db-padding-s);">라이트박스 배경(오버레이) 클릭 시 닫기</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--db-border-light);">
              <td style="padding: var(--db-padding-s);"><code>showCaption</code></td>
              <td style="padding: var(--db-padding-s);">boolean</td>
              <td style="padding: var(--db-padding-s);">true</td>
              <td style="padding: var(--db-padding-s);">이미지 하단에 캡션 영역 표시 여부</td>
            </tr>
          </tbody>
        </table>
        <p><strong>그룹별 옵션:</strong> 같은 그룹 내의 모든 트리거는 동일한 옵션을 공유합니다. 첫 번째로 등록된 트리거의 옵션이 그룹 전체에 적용됩니다.</p>
      </section>

      <section>
        <h4>6. 실제 사용 예시</h4>
        <h5>예시 1: 기본 이미지 갤러리</h5>
        <pre>
<code class="language-html">&lt;div class="image-gallery" id="productImages"&gt;
  &lt;button type="button" 
          data-dewp-lightbox="product"
          data-lightbox-src="product-large-1.jpg"
          data-lightbox-caption="제품 이미지 1"&gt;
    &lt;img src="product-thumb-1.jpg" alt="제품 1"&gt;
  &lt;/button&gt;
  &lt;button type="button" 
          data-dewp-lightbox="product"
          data-lightbox-src="product-large-2.jpg"
          data-lightbox-caption="제품 이미지 2"&gt;
    &lt;img src="product-thumb-2.jpg" alt="제품 2"&gt;
  &lt;/button&gt;
&lt;/div&gt;

&lt;script&gt;
// 갤러리 등록
DEWP.registerLightbox('#productImages', {
  loop: true,
  showCaption: true
});
&lt;/script&gt;</code>
        </pre>

        <h5>예시 2: 외부 버튼으로 라이트박스 제어</h5>
        <pre>
<code class="language-html">&lt;!-- 이미지 갤러리 --&gt;
&lt;div id="gallery"&gt;
  &lt;button data-dewp-lightbox="photos" data-lightbox-src="photo1.jpg"&gt;
    &lt;img src="thumb1.jpg"&gt;
  &lt;/button&gt;
  &lt;!-- ... 더 많은 이미지 ... --&gt;
&lt;/div&gt;

&lt;!-- 외부 제어 버튼 --&gt;
&lt;button id="openFirst"&gt;첫 번째 이미지 열기&lt;/button&gt;
&lt;button id="openLast"&gt;마지막 이미지 열기&lt;/button&gt;
&lt;button id="closeBtn"&gt;닫기&lt;/button&gt;

&lt;script&gt;
// 갤러리 등록
DEWP.registerLightbox('#gallery');

// 외부 버튼 이벤트
document.getElementById('openFirst').addEventListener('click', () => {
  DEWP.openLightbox('photos', 0);
});

document.getElementById('openLast').addEventListener('click', () => {
  const gallery = document.getElementById('gallery');
  const triggers = gallery.querySelectorAll('[data-dewp-lightbox="photos"]');
  DEWP.openLightbox('photos', triggers.length - 1);
});

document.getElementById('closeBtn').addEventListener('click', () => {
  DEWP.closeLightbox();
});
&lt;/script&gt;</code>
        </pre>

        <h5>예시 3: 여러 개의 독립적인 갤러리</h5>
        <pre>
<code class="language-html">&lt;!-- 첫 번째 갤러리 --&gt;
&lt;div id="gallery1"&gt;
  &lt;button data-dewp-lightbox="gallery1" data-lightbox-src="img1.jpg"&gt;...&lt;/button&gt;
  &lt;button data-dewp-lightbox="gallery1" data-lightbox-src="img2.jpg"&gt;...&lt;/button&gt;
&lt;/div&gt;

&lt;!-- 두 번째 갤러리 (독립적) --&gt;
&lt;div id="gallery2"&gt;
  &lt;button data-dewp-lightbox="gallery2" data-lightbox-src="img3.jpg"&gt;...&lt;/button&gt;
  &lt;button data-dewp-lightbox="gallery2" data-lightbox-src="img4.jpg"&gt;...&lt;/button&gt;
&lt;/div&gt;

&lt;script&gt;
// 각각 독립적으로 등록
DEWP.registerLightbox('#gallery1', { loop: true });
DEWP.registerLightbox('#gallery2', { loop: false });
&lt;/script&gt;</code>
        </pre>
      </section>

      <section>
        <h4>7. 이미지 경로 지정 방법</h4>
        <p>라이트박스에 표시할 이미지 경로를 지정하는 여러 방법:</p>
        <pre>
<code class="language-html">&lt;!-- 방법 1: data-lightbox-src 사용 (권장) --&gt;
&lt;button data-dewp-lightbox="gallery" data-lightbox-src="large.jpg"&gt;
  &lt;img src="thumb.jpg"&gt;
&lt;/button&gt;

&lt;!-- 방법 2: href 속성 사용 (링크 요소) --&gt;
&lt;a href="large.jpg" data-dewp-lightbox="gallery"&gt;
  &lt;img src="thumb.jpg"&gt;
&lt;/a&gt;

&lt;!-- 방법 3: src 속성 사용 (이미지 요소) --&gt;
&lt;img src="large.jpg" data-dewp-lightbox="gallery" alt="이미지"&gt;</code>
        </pre>
        <p><strong>우선순위:</strong> <code>data-lightbox-src</code> → <code>href</code> → <code>src</code> 순서로 확인합니다. 썸네일과 큰 이미지가 다를 때는 <code>data-lightbox-src</code>를 사용하는 것이 좋습니다.</p>
      </section>

      <section>
        <h4>8. 캡션 표시</h4>
        <p>이미지 설명을 표시하는 여러 방법:</p>
        <pre>
<code class="language-html">&lt;!-- 방법 1: data-lightbox-caption 사용 (권장) --&gt;
&lt;button data-dewp-lightbox="gallery" 
        data-lightbox-src="img.jpg"
        data-lightbox-caption="이미지 설명 텍스트"&gt;
  &lt;img src="thumb.jpg"&gt;
&lt;/button&gt;

&lt;!-- 방법 2: title 속성 사용 --&gt;
&lt;button data-dewp-lightbox="gallery" 
        data-lightbox-src="img.jpg"
        title="이미지 설명 텍스트"&gt;
  &lt;img src="thumb.jpg"&gt;
&lt;/button&gt;

&lt;!-- 방법 3: data-caption 사용 --&gt;
&lt;button data-dewp-lightbox="gallery" 
        data-lightbox-src="img.jpg"
        data-caption="이미지 설명 텍스트"&gt;
  &lt;img src="thumb.jpg"&gt;
&lt;/button&gt;</code>
        </pre>
        <p><strong>우선순위:</strong> <code>data-lightbox-caption</code> → <code>data-caption</code> → <code>title</code> 순서로 확인합니다. 캡션이 없으면 표시되지 않습니다.</p>
        <p><strong>캡션 숨기기:</strong> <code>showCaption: false</code> 옵션을 사용하면 캡션 영역 자체가 숨겨집니다.</p>
      </section>

      <section>
        <h4>9. 접근성 (A11y)</h4>
        <p>Lightbox는 웹 접근성을 고려하여 설계되었습니다:</p>
        <ul>
          <li><strong>키보드 제어:</strong> 라이트박스가 열릴 때 포커스가 닫기 버튼으로 자동 이동합니다.</li>
          <li><strong>ESC 키:</strong> 라이트박스 닫기</li>
          <li><strong>화살표 키:</strong> ← (이전 이미지), → (다음 이미지)</li>
          <li><strong>포커스 복원:</strong> 라이트박스를 닫으면 마지막으로 클릭한 트리거 요소로 포커스가 복원됩니다.</li>
          <li><strong>ARIA 속성:</strong> 라이트박스 오버레이에 <code>aria-hidden</code>이 자동으로 관리됩니다.</li>
          <li><strong>카운터:</strong> 현재 이미지 번호와 전체 개수가 스크린 리더에 읽혀집니다.</li>
        </ul>
      </section>

      <section>
        <h4>10. 주의사항 및 팁</h4>
        <ul>
          <li><strong>그룹명:</strong> 같은 그룹명을 가진 요소들은 하나의 갤러리로 묶입니다. 그룹명이 다르면 독립적인 갤러리입니다.</li>
          <li><strong>이미지 로딩:</strong> 큰 이미지는 로딩 시간이 걸릴 수 있으므로, 적절히 최적화하거나 로딩 인디케이터를 추가하는 것을 권장합니다.</li>
          <li><strong>단일 이미지:</strong> 그룹에 이미지가 1개만 있을 때는 좌우 화살표 버튼이 자동으로 숨겨집니다.</li>
          <li><strong>동적 콘텐츠:</strong> 동적으로 트리거를 추가한 후에는 <code>registerLightbox</code>를 다시 호출해야 합니다.</li>
          <li><strong>중복 등록:</strong> 같은 트리거를 여러 번 등록해도 이벤트는 한 번만 바인딩됩니다.</li>
          <li><strong>스와이프 임계값:</strong> 화면 너비의 15% 이상 드래그해야 이미지가 변경됩니다.</li>
          <li><strong>body 스크롤 잠금:</strong> 라이트박스가 열리면 body의 스크롤이 자동으로 잠깁니다.</li>
        </ul>
      </section>
    </div>
  </div>

  <script src="https://unpkg.com/designbase-wp-library@latest/dist/js/dewp.min.js"></script>
  <script src="./src/_examples-manifest.js"></script>
  <script src="./src/_examples-shell.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      if (!window.DEWP) return;

      const gallery = document.getElementById('docsLightboxGallery');
      window.DEWP.registerLightbox(gallery, {
        loop: true,
        swipe: true,
        showCaption: true
      });

      document.getElementById('openLightboxFirst').addEventListener('click', function () {
        window.DEWP.openLightbox('travel', 0);
      });

      document.getElementById('openLightboxLast').addEventListener('click', function () {
        window.DEWP.openLightbox('travel', 3);
      });

      document.getElementById('closeLightboxBtn').addEventListener('click', function () {
        window.DEWP.closeLightbox();
      });
    });
  </script>
</body>

</html>

