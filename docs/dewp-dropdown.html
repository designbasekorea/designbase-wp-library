<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DEWP – Dropdown</title>
  <link rel="stylesheet" href="https://unpkg.com/designbase-wp-library@latest/dist/css/dewp.min.css" />
  <link rel="stylesheet" href="./src/_examples-shell.css" />
</head>

<body>

  <div class="ex-section">
    <div class="ex-section-header">
      <div class="ex-section-title-area">
        <h3 class="ex-section-title">기본(Default)</h3>
        <p class="ex-section-description">접근성 속성, 포커스 복귀</p>
      </div>
    </div>
    <div class="ex-section-content">
      <div class="dewp-dropdown" style="display:inline-block;">
        <button class="dewp-dropdown-toggle dewp-btn dewp-btn-outline-secondary" type="button">선택</button>
        <div class="dewp-dropdown-menu">
          <div class="dewp-dropdown-item" data-value="opt1">옵션 1</div>
          <div class="dewp-dropdown-item" data-value="opt2">옵션 2</div>
          <div class="dewp-dropdown-item" data-value="opt3">옵션 3</div>
        </div>
      </div>
    </div>
  </div>

  <div class="ex-section">
    <div class="ex-section-header">
      <div class="ex-section-title-area">
        <h3 class="ex-section-title">버튼 타입</h3>
      </div>
    </div>
    <div class="ex-section-content" style="display:flex; gap:12px; flex-wrap:wrap;">
      <div class="dewp-dropdown">
        <button class="dewp-dropdown-toggle dewp-btn dewp-btn-primary" type="button">Primary</button>
        <div class="dewp-dropdown-menu">
          <div class="dewp-dropdown-item">메뉴</div>
        </div>
      </div>
      <div class="dewp-dropdown">
        <button class="dewp-dropdown-toggle dewp-btn dewp-btn-secondary" type="button">Secondary</button>
        <div class="dewp-dropdown-menu">
          <div class="dewp-dropdown-item">메뉴</div>
        </div>
      </div>
      <div class="dewp-dropdown">
        <button class="dewp-dropdown-toggle dewp-btn dewp-btn-tertiary" type="button">Tertiary</button>
        <div class="dewp-dropdown-menu">
          <div class="dewp-dropdown-item">메뉴</div>
        </div>
      </div>
    </div>
  </div>

  <div class="ex-section">
    <div class="ex-section-header">
      <div class="ex-section-title-area">
        <h3 class="ex-section-title">문서 요약</h3>
        <p class="ex-section-description">Dropdown 핵심 사용 가이드</p>
      </div>
    </div>
    <div class="ex-section-content ex-docs">
      <section>
        <h4>1. HTML 구조 - 필수 요소</h4>
        <p>Dropdown을 사용하기 위한 기본 HTML 구조입니다:</p>
        <pre>
<code class="language-html">&lt;div class="dewp-dropdown"&gt;
  &lt;button class="dewp-dropdown-toggle dewp-btn dewp-btn-primary" type="button"&gt;선택&lt;/button&gt;
  &lt;div class="dewp-dropdown-menu" role="menu"&gt;
    &lt;div class="dewp-dropdown-item" data-value="opt1" role="menuitem"&gt;옵션 1&lt;/div&gt;
    &lt;div class="dewp-dropdown-item" data-value="opt2" role="menuitem"&gt;옵션 2&lt;/div&gt;
    &lt;div class="dewp-dropdown-item" data-value="opt3" role="menuitem"&gt;옵션 3&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code>
        </pre>
        <p><strong>필수 요소:</strong></p>
        <ul>
          <li><code>dewp-dropdown</code>: 최상위 컨테이너 클래스 (필수)</li>
          <li><code>dewp-dropdown-toggle</code>: 토글 버튼 클래스 (필수)</li>
          <li><code>dewp-dropdown-menu</code>: 드롭다운 메뉴 컨테이너 (필수)</li>
          <li><code>dewp-dropdown-item</code>: 메뉴 항목 클래스 (필수)</li>
        </ul>
        <p><strong>필수 속성:</strong></p>
        <ul>
          <li>토글 버튼: <code>type="button"</code> (폼 제출 방지)</li>
          <li>메뉴 항목: <code>data-value</code> (선택된 값 식별용)</li>
          <li>접근성: <code>role="menu"</code> (메뉴), <code>role="menuitem"</code> (항목)</li>
        </ul>
      </section>

      <section>
        <h4>2. JavaScript 초기화</h4>
        <h5>방법 1: 자동 초기화 (권장)</h5>
        <pre>
<code class="language-js">// 페이지 로드 시 모든 드롭다운 자동 초기화
document.addEventListener('DOMContentLoaded', function() {
  if (window.DEWP) {
    DEWP.autoInitializeDropdowns();
  }
});</code>
        </pre>
        <p><strong>주의사항:</strong> 자동 초기화는 페이지 내 모든 <code>.dewp-dropdown</code> 요소를 찾아 초기화합니다.</p>

        <h5>방법 2: 수동 초기화</h5>
        <pre>
<code class="language-js">// 특정 드롭다운만 초기화
const dropdownEl = document.querySelector('.dewp-dropdown');
DEWP.createDropdown({ container: dropdownEl });

// 또는 선택자로 초기화
DEWP.createDropdown({ container: '#my-dropdown' });</code>
        </pre>
      </section>

      <section>
        <h4>3. JavaScript API - 전체 메서드 목록</h4>
        <h5>제어 메서드</h5>
        <pre>
<code class="language-js">// 드롭다운 토글 (열려있으면 닫고, 닫혀있으면 열기)
DEWP.toggleDropdown(dropdownEl);

// 드롭다운 열기
DEWP.showDropdown(dropdownEl);

// 드롭다운 닫기
DEWP.hideDropdown(dropdownEl);

// 모든 드롭다운 닫기
DEWP.closeAllDropdowns();</code>
        </pre>
        <p><strong>매개변수:</strong> <code>dropdownEl</code>은 드롭다운 컨테이너 요소(Element 객체) 또는 선택자 문자열입니다.</p>

        <h5>값 조회 및 설정</h5>
        <pre>
<code class="language-js">// 선택된 값 가져오기
const value = DEWP.getSelectedValue(dropdownEl);
console.log(value); // 'opt1'

// 선택된 텍스트 가져오기
const text = DEWP.getSelectedText(dropdownEl);
console.log(text); // '옵션 1'

// 값으로 항목 선택하기
DEWP.setDropdownValue(dropdownEl, 'opt1');</code>
        </pre>
      </section>

      <section>
        <h4>4. 실제 사용 예시</h4>
        <h5>예시 1: 기본 드롭다운</h5>
        <pre>
<code class="language-html">&lt;div class="dewp-dropdown" id="my-dropdown"&gt;
  &lt;button class="dewp-dropdown-toggle dewp-btn dewp-btn-outline-secondary" type="button"&gt;
    선택하세요
  &lt;/button&gt;
  &lt;div class="dewp-dropdown-menu" role="menu"&gt;
    &lt;div class="dewp-dropdown-item" data-value="1" role="menuitem"&gt;옵션 1&lt;/div&gt;
    &lt;div class="dewp-dropdown-item" data-value="2" role="menuitem"&gt;옵션 2&lt;/div&gt;
    &lt;div class="dewp-dropdown-item" data-value="3" role="menuitem"&gt;옵션 3&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
  document.addEventListener('DOMContentLoaded', function() {
    if (window.DEWP) {
      DEWP.autoInitializeDropdowns();
    }
  });
&lt;/script&gt;</code>
        </pre>

        <h5>예시 2: 선택 이벤트 처리</h5>
        <pre>
<code class="language-js">const dropdownEl = document.querySelector('#my-dropdown');

// 드롭다운 초기화
DEWP.createDropdown({ container: dropdownEl });

// 항목 선택 이벤트 리스너 추가
dropdownEl.addEventListener('change', function(e) {
  const selectedValue = DEWP.getSelectedValue(dropdownEl);
  const selectedText = DEWP.getSelectedText(dropdownEl);
  console.log('선택된 값:', selectedValue);
  console.log('선택된 텍스트:', selectedText);
});</code>
        </pre>

        <h5>예시 3: 외부 버튼으로 제어</h5>
        <pre>
<code class="language-html">&lt;button id="openBtn" class="dewp-btn"&gt;드롭다운 열기&lt;/button&gt;
&lt;button id="closeBtn" class="dewp-btn"&gt;드롭다운 닫기&lt;/button&gt;

&lt;div class="dewp-dropdown" id="my-dropdown"&gt;
  &lt;button class="dewp-dropdown-toggle dewp-btn dewp-btn-primary" type="button"&gt;선택&lt;/button&gt;
  &lt;div class="dewp-dropdown-menu" role="menu"&gt;
    &lt;div class="dewp-dropdown-item" data-value="opt1" role="menuitem"&gt;옵션 1&lt;/div&gt;
    &lt;div class="dewp-dropdown-item" data-value="opt2" role="menuitem"&gt;옵션 2&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
  const dropdownEl = document.querySelector('#my-dropdown');
  DEWP.createDropdown({ container: dropdownEl });
  
  document.getElementById('openBtn').addEventListener('click', () => {
    DEWP.showDropdown(dropdownEl);
  });
  
  document.getElementById('closeBtn').addEventListener('click', () => {
    DEWP.hideDropdown(dropdownEl);
  });
&lt;/script&gt;</code>
        </pre>

        <h5>예시 4: 동적 값 설정</h5>
        <pre>
<code class="language-js">// 페이지 로드 시 기본값 설정
const dropdownEl = document.querySelector('#my-dropdown');
DEWP.createDropdown({ container: dropdownEl });

// 특정 값으로 설정
DEWP.setDropdownValue(dropdownEl, 'opt2');

// 또는 JavaScript로 직접 설정
const item = dropdownEl.querySelector('[data-value="opt2"]');
if (item) {
  item.click();
}</code>
        </pre>
      </section>

      <section>
        <h4>5. 버튼 스타일 변형</h4>
        <p>드롭다운 토글 버튼은 다양한 버튼 스타일을 사용할 수 있습니다:</p>
        <pre>
<code class="language-html">&lt;!-- Primary 버튼 --&gt;
&lt;button class="dewp-dropdown-toggle dewp-btn dewp-btn-primary" type="button"&gt;Primary&lt;/button&gt;

&lt;!-- Secondary 버튼 --&gt;
&lt;button class="dewp-dropdown-toggle dewp-btn dewp-btn-secondary" type="button"&gt;Secondary&lt;/button&gt;

&lt;!-- Tertiary 버튼 --&gt;
&lt;button class="dewp-dropdown-toggle dewp-btn dewp-btn-tertiary" type="button"&gt;Tertiary&lt;/button&gt;

&lt;!-- Outline 버튼 --&gt;
&lt;button class="dewp-dropdown-toggle dewp-btn dewp-btn-outline-secondary" type="button"&gt;Outline&lt;/button&gt;</code>
        </pre>
      </section>

      <section>
        <h4>6. 접근성 (A11y)</h4>
        <p>Dropdown은 웹 접근성을 고려하여 설계되었습니다:</p>
        <ul>
          <li><strong>ARIA 속성:</strong> 토글 버튼에 <code>aria-expanded</code>, <code>aria-controls</code> 자동 업데이트</li>
          <li><strong>키보드 접근:</strong> Arrow 키로 항목 이동, Enter/Space로 선택, ESC로 닫기</li>
          <li><strong>포커스 관리:</strong> 닫힌 후 토글 버튼으로 포커스 복귀</li>
          <li><strong>역할 지정:</strong> 메뉴는 <code>role="menu"</code>, 항목은 <code>role="menuitem"</code> 권장</li>
          <li><strong>값 식별:</strong> <code>data-value</code> 속성으로 선택된 값 식별</li>
        </ul>
        <p><strong>권장 사항:</strong></p>
        <ul>
          <li>메뉴와 항목에 적절한 <code>role</code> 속성을 추가하세요.</li>
          <li>각 항목에 고유한 <code>data-value</code> 값을 지정하세요.</li>
          <li>토글 버튼의 텍스트는 명확하게 작성하세요.</li>
          <li>드롭다운이 열릴 때 첫 번째 항목에 포커스가 이동합니다.</li>
        </ul>
      </section>

      <section>
        <h4>7. 주의사항 및 팁</h4>
        <ul>
          <li><strong>자동 초기화:</strong> <code>autoInitializeDropdowns()</code>는 페이지 로드 시 한 번만 호출하면 됩니다.</li>
          <li><strong>동적 생성:</strong> 동적으로 추가된 드롭다운은 수동으로 초기화해야 합니다.</li>
          <li><strong>값 설정:</strong> <code>setDropdownValue</code>는 <code>data-value</code> 속성 값을 사용합니다.</li>
          <li><strong>이벤트:</strong> 항목 선택 시 <code>change</code> 이벤트가 발생합니다.</li>
          <li><strong>여러 드롭다운:</strong> 한 항목을 선택하면 다른 열린 드롭다운은 자동으로 닫힙니다.</li>
          <li><strong>외부 클릭:</strong> 드롭다운 외부를 클릭하면 자동으로 닫힙니다.</li>
          <li><strong>키보드 네비게이션:</strong> Arrow 키로 항목 간 이동이 가능합니다.</li>
        </ul>
      </section>
    </div>
  </div>

  <script src="https://unpkg.com/designbase-wp-library@latest/dist/js/dewp.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      if (window.DEWP) window.DEWP.autoInitializeDropdowns();
    });
  </script>

  <script src="./src/_examples-manifest.js"></script>
  <script src="./src/_examples-shell.js"></script>
</body>

</html>