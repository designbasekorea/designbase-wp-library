<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DEWP 라이브러리 - 실제 워드프레스 플러그인 예시</title>
  <link rel="stylesheet" href="../../dist/css/dewp.min.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f1f3f4;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .plugin-section {
      margin-bottom: 40px;
      padding: 25px;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      background: #f8f9fa;
    }

    .plugin-section h2 {
      color: #495057;
      border-bottom: 2px solid #007bff;
      padding-bottom: 10px;
    }

    .code-block {
      background: #2d3748;
      color: #e2e8f0;
      border-radius: 6px;
      padding: 20px;
      margin: 15px 0;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 14px;
      overflow-x: auto;
      position: relative;
    }

    .code-block::before {
      content: '📁 파일 경로';
      position: absolute;
      top: -10px;
      left: 15px;
      background: #007bff;
      color: white;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
    }

    .demo-area {
      margin: 20px 0;
      padding: 20px;
      background: white;
      border-radius: 8px;
      border: 2px solid #dee2e6;
    }

    .demo-btn {
      margin: 8px;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .demo-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
    }

    .btn-primary {
      background: #007bff;
      color: white;
    }

    .btn-success {
      background: #28a745;
      color: white;
    }

    .btn-warning {
      background: #ffc107;
      color: #212529;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .btn-info {
      background: #17a2b8;
      color: white;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #495057;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      font-size: 14px;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
    }

    .table-container {
      overflow-x: auto;
      margin: 20px 0;
    }

    .dewp-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    .dewp-table th,
    .dewp-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #dee2e6;
    }

    .dewp-table th {
      background-color: #f8f9fa;
      font-weight: 600;
      color: #495057;
    }

    .dewp-table tr:hover {
      background-color: #f8f9fa;
    }

    .status-badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
    }

    .status-active {
      background: #d4edda;
      color: #155724;
    }

    .status-inactive {
      background: #f8d7da;
      color: #721c24;
    }

    .status-pending {
      background: #fff3cd;
      color: #856404;
    }

    .action-buttons {
      display: flex;
      gap: 5px;
    }

    .action-btn {
      padding: 4px 8px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s ease;
    }

    .action-btn:hover {
      transform: translateY(-1px);
    }

    .btn-edit {
      background: #17a2b8;
      color: white;
    }

    .btn-delete {
      background: #dc3545;
      color: white;
    }

    .btn-view {
      background: #6c757d;
      color: white;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>🏗️ DEWP 라이브러리 - 실제 워드프레스 플러그인 예시</h1>
    <p>이 페이지는 실제 워드프레스 플러그인에서 DEWP 라이브러리를 어떻게 사용하는지 보여줍니다.</p>

    <!-- 사용자 관리 플러그인 예시 -->
    <div class="plugin-section">
      <h2>👥 사용자 관리 플러그인</h2>
      <p>워드프레스 사용자를 관리하는 플러그인의 예시입니다.</p>

      <div class="code-block">
        // 📁 includes/class-user-manager.php
        class User_Manager {
        public function __construct() {
        add_action('wp_enqueue_scripts', [$this, 'enqueue_scripts']);
        add_action('wp_ajax_add_user', [$this, 'add_user']);
        add_action('wp_ajax_delete_user', [$this, 'delete_user']);
        }

        public function enqueue_scripts() {
        wp_enqueue_script('dewp-library', plugin_dir_url(__FILE__) . '../../dist/js/dewp.min.js');
        wp_enqueue_style('dewp-styles', plugin_dir_url(__FILE__) . '../../dist/css/dewp.min.css');
        }

        public function add_user() {
        // 사용자 추가 로직...
        $response = ['success' => true, 'message' => '사용자가 추가되었습니다.'];

        if ($response['success']) {
        // DEWP 토스트로 성공 메시지 표시
        wp_send_json_success($response);
        } else {
        wp_send_json_error($response);
        }
        }
        }
      </div>

      <div class="demo-area">
        <h3>사용자 추가 폼</h3>
        <form id="user-form">
          <div class="form-group">
            <label for="username">사용자명</label>
            <input type="text" id="username" name="username" required>
          </div>
          <div class="form-group">
            <label for="email">이메일</label>
            <input type="email" id="email" name="email" required>
          </div>
          <div class="form-group">
            <label for="role">역할</label>
            <select id="role" name="role">
              <option value="subscriber">구독자</option>
              <option value="contributor">기여자</option>
              <option value="author">작성자</option>
              <option value="editor">편집자</option>
              <option value="administrator">관리자</option>
            </select>
          </div>
          <button type="submit" class="demo-btn dewp-btn-success">사용자 추가</button>
        </form>
      </div>
    </div>

    <!-- 게시물 관리 플러그인 예시 -->
    <div class="plugin-section">
      <h2>📝 게시물 관리 플러그인</h2>
      <p>워드프레스 게시물을 관리하는 플러그인의 예시입니다.</p>

      <div class="code-block">
        // 📁 includes/class-post-manager.php
        class Post_Manager {
        public function __construct() {
        add_action('wp_enqueue_scripts', [$this, 'enqueue_scripts']);
        add_action('wp_ajax_save_post', [$this, 'save_post']);
        add_action('wp_ajax_delete_post', [$this, 'delete_post']);
        }

        public function enqueue_scripts() {
        wp_enqueue_script('dewp-library', plugin_dir_url(__FILE__) . '../../dist/js/dewp.min.js');
        wp_enqueue_style('dewp-styles', plugin_dir_url(__FILE__) . '../../dist/css/dewp.min.css');
        }

        public function save_post() {
        // 게시물 저장 로직...
        $response = ['success' => true, 'message' => '게시물이 저장되었습니다.'];

        if ($response['success']) {
        wp_send_json_success($response);
        } else {
        wp_send_json_error($response);
        }
        }
        }
      </div>

      <div class="demo-area">
        <h3>게시물 목록</h3>
        <div class="table-container">
          <table class="dewp-table">
            <thead>
              <tr>
                <th>제목</th>
                <th>작성자</th>
                <th>상태</th>
                <th>작성일</th>
                <th>작업</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>첫 번째 게시물</td>
                <td>관리자</td>
                <td><span class="dewp-badge dewp-badge-success">발행됨</span></td>
                <td>2024-01-15</td>
                <td>
                  <div class="action-buttons">
                    <button class="action-btn dewp-btn-view" onclick="viewPost(1)">보기</button>
                    <button class="action-btn dewp-btn-edit" onclick="editPost(1)">편집</button>
                    <button class="action-btn dewp-btn-delete" onclick="deletePost(1)">삭제</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>두 번째 게시물</td>
                <td>작성자</td>
                <td><span class="dewp-badge dewp-badge-warning">검토 중</span></td>
                <td>2024-01-14</td>
                <td>
                  <div class="action-buttons">
                    <button class="action-btn dewp-btn-view" onclick="viewPost(2)">보기</button>
                    <button class="action-btn dewp-btn-edit" onclick="editPost(2)">편집</button>
                    <button class="action-btn dewp-btn-delete" onclick="deletePost(2)">삭제</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- 설정 관리 플러그인 예시 -->
    <div class="plugin-section">
      <h2>⚙️ 설정 관리 플러그인</h2>
      <p>워드프레스 플러그인 설정을 관리하는 예시입니다.</p>

      <div class="code-block">
        // 📁 includes/class-settings-manager.php
        class Settings_Manager {
        public function __construct() {
        add_action('wp_enqueue_scripts', [$this, 'enqueue_scripts']);
        add_action('wp_ajax_save_settings', [$this, 'save_settings']);
        add_action('wp_ajax_reset_settings', [$this, 'reset_settings']);
        }

        public function enqueue_scripts() {
        wp_enqueue_script('dewp-library', plugin_dir_url(__FILE__) . '../../dist/js/dewp.min.js');
        wp_enqueue_style('dewp-styles', plugin_dir_url(__FILE__) . '../../dist/css/dewp.min.css');
        }

        public function save_settings() {
        // 설정 저장 로직...
        $response = ['success' => true, 'message' => '설정이 저장되었습니다.'];

        if ($response['success']) {
        wp_send_json_success($response);
        } else {
        wp_send_json_error($response);
        }
        }
        }
      </div>

      <div class="demo-area">
        <h3>플러그인 설정</h3>
        <form id="settings-form">
          <div class="form-group">
            <label for="api_key">API 키</label>
            <input type="text" id="api_key" name="api_key" placeholder="API 키를 입력하세요">
          </div>
          <div class="form-group">
            <label for="cache_duration">캐시 지속 시간 (분)</label>
            <input type="number" id="cache_duration" name="cache_duration" value="60" min="1" max="1440">
          </div>
          <div class="form-group">
            <label for="debug_mode">디버그 모드</label>
            <select id="debug_mode" name="debug_mode">
              <option value="0">비활성화</option>
              <option value="1">활성화</option>
            </select>
          </div>
          <div class="form-group">
            <label for="log_level">로그 레벨</label>
            <select id="log_level" name="log_level">
              <option value="error">오류만</option>
              <option value="warning">경고 이상</option>
              <option value="info">정보 이상</option>
              <option value="debug">모든 로그</option>
            </select>
          </div>
          <button type="submit" class="demo-btn dewp-btn-primary">설정 저장</button>
          <button type="button" class="demo-btn dewp-btn-warning" onclick="resetSettings()">설정 초기화</button>
        </form>
      </div>
    </div>

    <!-- 프론트엔드 JavaScript 예시 -->
    <div class="plugin-section">
      <h2>🔧 프론트엔드 JavaScript 구현</h2>
      <p>워드프레스 플러그인의 프론트엔드에서 DEWP 라이브러리를 사용하는 방법입니다.</p>

      <div class="code-block">
        // 📁 assets/js/frontend.js
        (function($) {
        'use strict';

        // DEWP 라이브러리 사용 예시
        const DEWP = window.DEWP.DEWP;

        // 사용자 추가 폼 처리
        $('#user-form').on('submit', function(e) {
        e.preventDefault();

        const formData = new FormData(this);
        formData.append('action', 'add_user');
        formData.append('nonce', dewp_ajax.nonce);

        $.ajax({
        url: dewp_ajax.ajax_url,
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function(response) {
        if (response.success) {
        DEWP.showSuccessToast(response.data.message);
        $('#user-form')[0].reset();
        } else {
        DEWP.showErrorToast(response.data.message);
        }
        },
        error: function() {
        DEWP.showErrorToast('요청 처리 중 오류가 발생했습니다.');
        }
        });
        });

        // 게시물 삭제 확인
        window.deletePost = function(postId) {
        DEWP.showConfirmModal({
        title: '게시물 삭제',
        message: '정말로 이 게시물을 삭제하시겠습니까?',
        confirmText: '삭제',
        cancelText: '취소',
        onConfirm: function() {
        // 삭제 로직 실행
        DEWP.showSuccessToast('게시물이 삭제되었습니다.');
        }
        });
        };

        // 설정 저장
        $('#settings-form').on('submit', function(e) {
        e.preventDefault();

        const formData = new FormData(this);
        formData.append('action', 'save_settings');
        formData.append('nonce', dewp_ajax.nonce);

        $.ajax({
        url: dewp_ajax.ajax_url,
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function(response) {
        if (response.success) {
        DEWP.showSuccessToast(response.data.message);
        } else {
        DEWP.showErrorToast(response.data.message);
        }
        },
        error: function() {
        DEWP.showErrorToast('설정 저장 중 오류가 발생했습니다.');
        }
        });
        });

        })(jQuery);
      </div>
    </div>

    <!-- 라이브러리 통합 가이드 -->
    <div class="plugin-section">
      <h2>📚 라이브러리 통합 가이드</h2>
      <p>DEWP 라이브러리를 워드프레스 플러그인에 통합하는 방법입니다.</p>

      <div class="demo-area">
        <h3>1. 파일 구조</h3>
        <pre style="background: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto;">
your-plugin/
├── includes/
│   ├── class-user-manager.php
│   ├── class-post-manager.php
│   └── class-settings-manager.php
├── assets/
│   ├── js/
│   │   └── frontend.js
│   └── css/
│       └── admin.css
├── dist/
│   ├── js/
│   │   └── dewp.min.js
│   └── css/
│       └── dewp.min.css
└── your-plugin.php
                </pre>

        <h3>2. 메인 플러그인 파일</h3>
        <pre style="background: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto;">
// 📁 your-plugin.php
&lt;?php
/**
 * Plugin Name: Your Plugin Name
 * Description: Your plugin description
 * Version: 1.0.0
 * Author: Your Name
 */

// 플러그인 초기화
add_action('plugins_loaded', 'your_plugin_init');

function your_plugin_init() {
    // 클래스 파일들 로드
    require_once plugin_dir_path(__FILE__) . 'includes/class-user-manager.php';
    require_once plugin_dir_path(__FILE__) . 'includes/class-post-manager.php';
    require_once plugin_dir_path(__FILE__) . 'includes/class-settings-manager.php';
    
    // 인스턴스 생성
    new User_Manager();
    new Post_Manager();
    new Settings_Manager();
}
                </pre>

        <h3>3. AJAX 처리</h3>
        <pre style="background: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto;">
// 📁 includes/class-ajax-handler.php
class Ajax_Handler {
    public function __construct() {
        add_action('wp_ajax_your_action', [$this, 'handle_ajax']);
        add_action('wp_ajax_nopriv_your_action', [$this, 'handle_ajax']);
    }
    
    public function handle_ajax() {
        // nonce 검증
        if (!wp_verify_nonce($_POST['nonce'], 'dewp_nonce')) {
            wp_send_json_error(['message' => '보안 검증에 실패했습니다.']);
        }
        
        // 데이터 처리
        $result = $this->process_data($_POST);
        
        if ($result['success']) {
            wp_send_json_success($result);
        } else {
            wp_send_json_error($result);
        }
    }
}
                </pre>
      </div>
    </div>
  </div>

  <!-- DEWP JavaScript 라이브러리 로드 -->
  <script src="../../dist/js/dewp.min.js"></script>

  <script>
    // 사용자 추가 폼 처리
    document.getElementById('user-form').addEventListener('submit', function (e) {
      e.preventDefault();

      const formData = new FormData(this);
      const username = formData.get('username');
      const email = formData.get('email');
      const role = formData.get('role');

      // 성공 메시지 표시
      window.DEWP.DEWP.showSuccessToast(`${username} 사용자가 ${role} 역할로 추가되었습니다!`);

      // 폼 초기화
      this.reset();
    });

    // 게시물 보기
    window.viewPost = function (postId) {
      window.DEWP.DEWP.showModal({
        title: `게시물 #${postId}`,
        content: `게시물 #${postId}의 상세 내용을 표시합니다.`,
        size: 'lg'
      });
    };

    // 게시물 편집
    window.editPost = function (postId) {
      window.DEWP.DEWP.showModal({
        title: `게시물 #${postId} 편집`,
        content: `게시물 #${postId}의 편집 폼을 표시합니다.`,
        size: 'lg'
      });
    };

    // 게시물 삭제
    window.deletePost = function (postId) {
      window.DEWP.DEWP.showConfirmModal({
        title: '게시물 삭제',
        message: `정말로 게시물 #${postId}를 삭제하시겠습니까?`,
        confirmText: '삭제',
        cancelText: '취소',
        onConfirm: () => {
          window.DEWP.DEWP.showSuccessToast(`게시물 #${postId}가 삭제되었습니다.`);
        },
        onCancel: () => {
          window.DEWP.DEWP.showInfoToast('삭제가 취소되었습니다.');
        }
      });
    };

    // 설정 저장
    document.getElementById('settings-form').addEventListener('submit', function (e) {
      e.preventDefault();

      const formData = new FormData(this);
      const apiKey = formData.get('api_key');
      const cacheDuration = formData.get('cache_duration');
      const debugMode = formData.get('debug_mode');
      const logLevel = formData.get('log_level');

      // 성공 메시지 표시
      window.DEWP.DEWP.showSuccessToast('플러그인 설정이 저장되었습니다!');

      // 설정 정보 표시
      setTimeout(() => {
        window.DEWP.DEWP.showModal({
          title: '저장된 설정',
          content: `
                        <div style="text-align: left;">
                            <p><strong>API 키:</strong> ${apiKey || '설정되지 않음'}</p>
                            <p><strong>캐시 지속 시간:</strong> ${cacheDuration}분</p>
                            <p><strong>디버그 모드:</strong> ${debugMode === '1' ? '활성화' : '비활성화'}</p>
                            <p><strong>로그 레벨:</strong> ${logLevel}</p>
                        </div>
                    `,
          size: 'md'
        });
      }, 1000);
    });

    // 설정 초기화
    window.resetSettings = function () {
      window.DEWP.DEWP.showConfirmModal({
        title: '설정 초기화',
        message: '모든 설정을 기본값으로 초기화하시겠습니까?',
        confirmText: '초기화',
        cancelText: '취소',
        onConfirm: () => {
          document.getElementById('settings-form').reset();
          window.DEWP.DEWP.showSuccessToast('설정이 초기화되었습니다.');
        },
        onCancel: () => {
          window.DEWP.DEWP.showInfoToast('초기화가 취소되었습니다.');
        }
      });
    };

    // 페이지 로드 시 라이브러리 확인
    window.addEventListener('load', () => {
      if (window.DEWP && window.DEWP.DEWP) {
        console.log('✅ DEWP 라이브러리가 성공적으로 로드되었습니다!');
        console.log('사용 가능한 함수들:', Object.keys(window.DEWP.DEWP));

        // 시작 메시지 표시
        window.DEWP.DEWP.showInfoToast('워드프레스 플러그인 예시가 로드되었습니다!');
      } else {
        console.error('❌ DEWP 라이브러리를 찾을 수 없습니다.');
      }
    });
  </script>
</body>

</html>