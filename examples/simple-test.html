<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DEWP 간단 테스트</title>
  <link rel="stylesheet" href="../dist/css/dewp.min.css">
  <style>
    body {
      padding: 20px;
      font-family: Arial, sans-serif;
    }

    .test-btn {
      margin: 10px;
      padding: 10px 20px;
    }

    .status {
      margin: 10px 0;
      padding: 10px;
      background: #f0f0f0;
    }
  </style>
</head>

<body>
  <h1>🚀 DEWP 라이브러리 간단 테스트</h1>

  <div>
    <button class="test-btn dewp-btn dewp-btn-primary" onclick="testToast()">토스트 테스트</button>
    <button class="test-btn dewp-btn dewp-btn-success" onclick="testModal()">모달 테스트</button>
    <button class="test-btn dewp-btn dewp-btn-info" onclick="testDropdown()">드롭다운 테스트</button>
    <button class="test-btn dewp-btn dewp-btn-secondary" onclick="testToggle()">토글 테스트</button>
    <button class="test-btn dewp-btn dewp-btn-warning" onclick="checkLibrary()">라이브러리 확인</button>
  </div>

  <div class="status" id="status">상태: 대기 중...</div>

  <script src="../dist/js/dewp.min.js"></script>
  <script>
    function checkLibrary() {
      const status = document.getElementById('status');

      console.log('🔍 DEWP 객체 확인 중...');
      console.log('window.DEWP:', window.DEWP);
      console.log('window.DEWP.DEWP:', window.DEWP?.DEWP);
      console.log('window 객체의 모든 속성:', Object.keys(window).filter(key => key.includes('DEWP')));

      if (window.DEWP && window.DEWP.DEWP) {
        const functions = Object.keys(window.DEWP.DEWP);
        status.innerHTML = `
                    <strong>✅ DEWP 라이브러리 로드 성공!</strong><br>
                    사용 가능한 함수들: ${functions.join(', ')}
                `;
        console.log('DEWP 객체:', window.DEWP.DEWP);
        console.log('사용 가능한 함수들:', functions);
      } else {
        status.innerHTML = '<strong>❌ DEWP 라이브러리를 찾을 수 없습니다.</strong>';
        console.log('DEWP 객체가 없습니다.');
        console.log('전체 window 객체:', window);
      }
    }

    function testToast() {
      console.log('🔔 토스트 테스트 시작...');
      console.log('window.DEWP:', window.DEWP);
      console.log('window.DEWP.DEWP:', window.DEWP?.DEWP);
      console.log('window.DEWP.DEWP.showToast:', window.DEWP?.DEWP?.showToast);

      if (window.DEWP && window.DEWP.DEWP && window.DEWP.DEWP.showToast) {
        window.DEWP.DEWP.showToast('토스트 테스트 성공!', 'success');
        document.getElementById('status').innerHTML = '토스트를 표시했습니다.';
      } else {
        alert('토스트 함수를 찾을 수 없습니다.');
      }
    }

    function testModal() {
      console.log('🪟 모달 테스트 시작...');
      console.log('window.DEWP:', window.DEWP);
      console.log('window.DEWP.DEWP:', window.DEWP?.DEWP);
      console.log('window.DEWP.DEWP.showModal:', window.DEWP?.DEWP?.showModal);

      if (window.DEWP && window.DEWP.DEWP && window.DEWP.DEWP.showModal) {
        window.DEWP.DEWP.showModal({
          title: '테스트 모달',
          content: '모달이 제대로 작동합니다!',
          size: 'md'
        });
        document.getElementById('status').innerHTML = '모달을 표시했습니다.';
      } else {
        alert('모달 함수를 찾을 수 없습니다.');
      }
    }

    // 드롭다운 테스트
    function testDropdown() {
      console.log('🔽 드롭다운 테스트 시작...');
      console.log('window.DEWP.DEWP:', window.DEWP?.DEWP);
      console.log('window.DEWP.DEWP.createDropdown:', window.DEWP?.DEWP?.createDropdown);

      if (window.DEWP && window.DEWP.DEWP && window.DEWP.DEWP.createDropdown) {
        // 드롭다운 생성
        const dropdownId = window.DEWP.DEWP.createDropdown({
          trigger: document.querySelector('.dewp-btn-info'),
          content: `
            <div style="padding: 10px;">
              <div style="padding: 8px 12px; cursor: pointer; border-bottom: 1px solid #eee;">메뉴 1</div>
              <div style="padding: 8px 12px; cursor: pointer; border-bottom: 1px solid #eee;">메뉴 2</div>
              <div style="padding: 8px 12px; cursor: pointer;">메뉴 2</div>
            </div>
          `,
          position: 'bottom'
        });

        // 드롭다운 표시
        window.DEWP.DEWP.showDropdown(dropdownId);
        document.getElementById('status').innerHTML = '드롭다운을 생성하고 표시했습니다. (ID: ' + dropdownId + ')';
      } else {
        alert('드롭다운 함수를 찾을 수 없습니다.');
      }
    }

    // 토글 테스트
    function testToggle() {
      console.log('🔄 토글 테스트 시작...');
      console.log('window.DEWP.DEWP:', window.DEWP?.DEWP);
      console.log('window.DEWP.DEWP.toggleClass:', window.DEWP?.DEWP?.toggleClass);

      if (window.DEWP && window.DEWP.DEWP && window.DEWP.DEWP.toggleClass) {
        const statusEl = document.getElementById('status');

        // 클래스 토글
        window.DEWP.DEWP.toggleClass(statusEl, 'active');

        // 현재 상태 확인
        const isActive = window.DEWP.DEWP.hasClass(statusEl, 'active');
        document.getElementById('status').innerHTML = '토글 테스트 완료! 현재 상태: ' + (isActive ? '활성화' : '비활성화');

        // 2초 후 원래대로 복원
        setTimeout(() => {
          window.DEWP.DEWP.removeClass(statusEl, 'active');
        }, 2000);
      } else {
        alert('토글 함수를 찾을 수 없습니다.');
      }
    }

    // 페이지 로드 시 자동으로 라이브러리 확인
    window.addEventListener('load', checkLibrary);
  </script>
</body>

</html>